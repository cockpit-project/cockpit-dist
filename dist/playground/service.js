(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=cockpit;var n,i,r=e.n(t);function o(e,t){e.wait((function(){e.valid&&t()}))}function a(e,t){var a,s,d={exists:null,state:null,enabled:null,wait:function(e){l.promise.then(e)},start:function(){return m("StartUnit",[e,"replace"])},stop:function(){return m("StopUnit",[e,"replace"])},restart:function(){return m("RestartUnit",[e,"replace"])},tryRestart:function(){return m("TryRestartUnit",[e,"replace"])},enable:function(){return y("EnableUnitFiles",[[e],!1,!1])},disable:function(){return y("DisableUnitFiles",[[e],!1])}};r().event_target(d);var c,l=r().defer();function u(){d.exists="not-found"!=a.LoadState||"inactive"!=a.ActiveState,"activating"==a.ActiveState?d.state="starting":"deactivating"==a.ActiveState?d.state="stopping":"active"==a.ActiveState||"reloading"==a.ActiveState?d.state="running":"failed"==a.ActiveState?d.state="failed":"inactive"==a.ActiveState&&d.exists?d.state="stopped":d.state=void 0,"enabled"==a.UnitFileState||"linked"==a.UnitFileState?d.enabled=!0:"disabled"==a.UnitFileState||"masked"==a.UnitFileState?d.enabled=!1:d.enabled=void 0,d.unit=a,d.dispatchEvent("changed"),l.resolve()}function f(){d.details=s,d.service=s,d.dispatchEvent("changed")}function v(){function e(e,t){n.call(e,"org.freedesktop.DBus.Properties","GetAll",[t]).fail((function(e){console.log(e)})).done((function(e){var i={};for(var r in e[0])i[r]=e[0][r].v;var o={};o[t]=i;var s={};s[a.path]=o,n.notify(s)}))}a&&s&&(e(a.path,"org.freedesktop.systemd1.Unit"),e(s.path,"org.freedesktop.systemd1."+t))}function p(t,n,i,r,o){r==e&&v()}-1==e.indexOf(".")&&(e+=".service"),void 0===t&&(t="Service"),c=function(){i.LoadUnit(e).done((function(e){(a=n.proxy("org.freedesktop.systemd1.Unit",e)).addEventListener("changed",u),o(a,u),(s=n.proxy("org.freedesktop.systemd1."+t,e)).addEventListener("changed",f),o(s,f)})).fail((function(){d.exists=!1,d.dispatchEvent("changed")}))},i||(n=r().dbus("org.freedesktop.systemd1",{superuser:"try"}),o(i=n.proxy("org.freedesktop.systemd1.Manager","/org/freedesktop/systemd1"),(function(){i.Subscribe().fail((function(e){"org.freedesktop.systemd1.AlreadySubscribed"!=e.name&&"org.freedesktop.DBus.Error.FileExists"!=e.name&&console.warn("Subscribing to systemd signals failed",e)}))}))),o(i,c),i.addEventListener("Reloading",(function(e,t){t||v()})),i.addEventListener("JobNew",p),i.addEventListener("JobRemoved",p);var g={};function b(e,t){return n.call("/org/freedesktop/systemd1","org.freedesktop.systemd1.Manager",e,t)}function m(e,t){var n=r().defer();return b(e,t).done((function(e){var t=e[0];g[t]=n})).fail((function(e){n.reject(e)})),n.promise()}function y(e,t){return b(e,t).then((function(){var e=r().defer();return b("Reload",[]).done((function(){e.resolve()})).fail((function(t){"org.freedesktop.DBus.Error.NoReply"===t.name?(v(),e.resolve()):e.reject(t)})),e.promise()}))}return i.addEventListener("JobRemoved",(function(e,t,n,i,r){g[n]&&("done"==r?g[n].resolve():g[n].reject(r),delete g[n])})),d}document.addEventListener("DOMContentLoaded",(()=>{let e;function t(){function t(){function t(t){document.getElementById(t).textContent=JSON.stringify(e[t])}t("exists"),t("state"),t("enabled")}e=a(r().location.path[0]||""),e.addEventListener("changed",t),t(),document.body.removeAttribute("hidden")}function n(t){document.getElementById(t).addEventListener("click",(()=>{e[t]().catch((e=>console.error("action",t,"failed:",JSON.stringify(e))))}))}n("start"),n("stop"),n("enable"),n("disable"),r().addEventListener("locationchanged",t),t()}))})();