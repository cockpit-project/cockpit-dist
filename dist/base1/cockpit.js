(()=>{"use strict";let e;try{e=window.localStorage.getItem("url-root")}catch(e){}!function(){const n={};if(S(n,{}),void 0===window.debugging)try{Object.defineProperty(window,"debugging",{get:function(){return window.sessionStorage.debugging||window.localStorage.debugging},set:function(e){window.sessionStorage.debugging=e}})}catch(e){}function t(e){return"function"==typeof e}function o(e){return null!==e&&"object"==typeof e}function i(e){return o(e)&&"[object Object]"===Object.prototype.toString.call(e)}function r(e){return((e=+e)||1/e)<0}function s(e){const n=arguments.length;for(let t=1;t<n;t++){const n=arguments[t];if(n)for(const t in n)void 0!==n[t]&&(e[t]=n[t])}return e}function c(e,n,t){const o=e?e.length:0;for(let i=0;i<o;i++)e[i]&&e[i].apply(n,t)}function l(e,n,t){let o=!1,i=0;t||(t=65536),e&&(e.byteLength?(i=e.byteLength,o=!0):e.length&&(i=e.length));for(let r=0;r<i;r+=t){const s=Math.min(i-r,t);n(o?new window.Uint8Array(e.buffer,r,s):e.substr(r,s))}}let a=null,u=null,d=!1,f=!1,p=null,h=null,m=null,g=null,w=null,v=window.location.origin;function b(e,n){const t=e.length,o=new(n||Array)(t);for(let n=0;n<t;n++)o[n]=255&e.charCodeAt(n);return o}function y(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function k(e){if("string"==typeof e)return window.btoa(e);e instanceof window.ArrayBuffer&&(e=new window.Uint8Array(e));const n=e.length;let t=2,o="";for(let i=0,r=0;r<n;r++)t=r%3,i|=e[r]<<(16>>>t&24),2!==t&&n-r!=1||(o+=String.fromCharCode(y(i>>>18&63),y(i>>>12&63),y(i>>>6&63),y(63&i)),i=0);return o.substr(0,o.length-2+t)+(2===t?"":1===t?"=":"==")}function _(e,n){if(n===String)return window.atob(e);const t=e.length;let o;for(o=0;o<3&&"="==e[t-(o+1)];o++);const i=(3*t+1>>2)-o,r=new(n||Array)(i);for(let n,o,c=0,l=0,a=0;a<t;a++)if(o=3&a,c|=((s=e.charCodeAt(a))>64&&s<91?s-65:s>96&&s<123?s-71:s>47&&s<58?s+4:43===s?62:47===s?63:0)<<18-6*o,3===o||t-a==1){for(n=0;n<3&&l<i;n++,l++)r[l]=c>>>(16>>>n&24)&255;c=0}var s;return r}function E(){"all"!=window.debugging&&"channel"!=window.debugging||console.debug.apply(console,arguments)}function S(e,n){Object.defineProperties(e,{addEventListener:{enumerable:!1,value:function(e,t){void 0===n[e]&&(n[e]=[]),n[e].push(t)}},removeEventListener:{enumerable:!1,value:function(e,t){const o=n[e]?n[e].length:0;for(let i=0;i<o;i++)if(n[e][i]===t){n[e][i]=null;break}}},dispatchEvent:{enumerable:!1,value:function(o){let i,r;if("string"==typeof o){i=o,r=Array.prototype.slice.call(arguments,1);let e=null;2==arguments.length?e=arguments[1]:arguments.length>2&&(e=r),o=new CustomEvent(i,{bubbles:!1,cancelable:!1,detail:e}),r.unshift(o)}else i=o.type,r=arguments;t(e["on"+i])&&e["on"+i].apply(e,r),c(n[i],e,r)}}})}function x(){let n=window.location.pathname||"/",t=e;return window.mock&&window.mock.pathname&&(n=window.mock.pathname),window.mock&&window.mock.url_root&&(t=window.mock.url_root),t&&0===n.indexOf("/"+t)&&(n=n.replace("/"+t,"")||"/"),0!==n.indexOf("/cockpit/")&&0!==n.indexOf("/cockpit+")&&(n=0===n.indexOf("/=")?"/cockpit+"+n.split("/")[1]:"/cockpit"),n.split("/")[1]}function j(n){n||(n="socket");const t=window.location.toString();let o=e;if(window.mock&&window.mock.url)return window.mock.url;window.mock&&window.mock.url_root&&(o=window.mock.url_root);let i=x();return o&&(i=o+"/"+i),0===t.indexOf("http:")?"ws://"+window.location.host+"/"+i+"/"+n:0===t.indexOf("https:")?"wss://"+window.location.host+"/"+i+"/"+n:(E("Cockpit must be used over http or https"),null)}function O(e,n){if(!n)return e.join("");let t=0;const o=e.length;for(let n=0;n<o;n++)t+=e[n].length;const i=window.Uint8Array?new window.Uint8Array(t):new Array(t);if(i.set)for(let n=0,t=0;t<o;t++)i.set(e[t],n),n+=e[t].length;else for(let n=0,t=0;t<o;t++){for(let o=0;o<e[t].length;o++)i[t+n]=e[t][o];n+=e[t].length}return i}function L(e){const n=this;n.readyState=0,window.addEventListener("message",(function(t){if(t.origin!==v||t.source!==e)return;const o=t.data;void 0===o||void 0===o.length&&void 0===o.byteLength||(0===o.length?(n.readyState=3,n.onclose()):n.onmessage(t))}),!1),n.send=function(n){e.postMessage(n,v)},n.close=function(){n.readyState=3,e.postMessage("",v),n.onclose()},window.setTimeout((function(){n.readyState=1,n.onopen()}),0)}function A(e){let n;if(e instanceof window.ArrayBuffer){const t=new window.Uint8Array(e),o=t.length;let i;for(i=0;i<o&&10!=t[i];i++);if(i===o)return console.warn("binary message without channel"),null;if(0===i)return console.warn("binary control message"),null;n=String.fromCharCode.apply(null,t.subarray(0,i))}else{const t=e.indexOf("\n");if(-1===t)return console.warn("text message without channel"),null;n=e.substring(0,t)}return n}function C(){const e=this;e.application=x(),S(e,{});let n,t=0,o="";window.mock&&(window.mock.last_transport=e);let i,r=!1,s=!1;window.parent!==window&&0===window.name.indexOf("cockpit1:")&&(n=new L(window.parent));try{!n&&window.parent!==window&&window.parent.options&&"cockpit1"==window.parent.options.protocol&&(n=new L(window.parent))}catch(e){}if(!n){const t=j();E("connecting to "+t),t&&("WebSocket"in window?n=new window.WebSocket(t,"cockpit1"):"MozWebSocket"in window?n=new window.MozWebSocket(t):console.error("WebSocket not supported, application will not work!")),i=window.setInterval((function(){e.ready&&n.send('\n{ "command": "ping" }'),s||(r?console.log("health check failure ignored"):(console.log("health check failed"),e.close({problem:"timeout"}))),s=!1}),3e4)}n||(n={close:function(){}},window.setTimeout((function(){e.close({problem:"no-cockpit"})}),50));const c={},l={};let a=!0;function v(){e.ready||(e.ready=!0,e.dispatchEvent("ready"))}e.ready=!1,n.onopen=function(){n&&(void 0!==n.binaryType&&(n.binaryType="arraybuffer"),n.send('\n{ "command": "init", "version": 1 }'))},n.onclose=function(){E("WebSocket onclose"),n=null,d&&(f=!0,window.location.reload(!0)),e.close()},n.onmessage=e.dispatch_data=function(n){s=!0;const t=n.data,i=A(t);if(null===i)return!1;const r=t instanceof window.ArrayBuffer?new window.Uint8Array(t,i.length+1):t.substring(i.length+1);let d;i?E("recv "+i+":",r):(E("recv control:",r),d=JSON.parse(r));const f=g?g.length:0;for(let e=0;e<f;e++)if(!1===g[e](t,i,d))return!1;return i?function(e,n){const t=l[e];t&&t(n)}(i,r):function(n){const t=n.channel;if("init"==n.command)!function(n){if(n.problem)return void e.close({problem:n.problem});if(1!==n.version)return console.error("received unsupported version in init message: "+n.version),void e.close({problem:"not-supported"});n["channel-seed"]&&(o=String(n["channel-seed"]));n.host&&(h=n.host);u&&(u.options=n,u.csrf_token=n["csrf-token"],u.host=h);p&&p(n);a&&(a=!1,v())}(n);else if(a)a=!1,("close"!=n.command||t)&&(console.error("received message before init: ",n.command),n={problem:"protocol-error"}),e.close(n);else if("ping"==n.command)n.command="pong",e.send_control(n);else if("pong"==n.command);else if("hint"==n.command)m&&m(n);else if(void 0!==t){const e=c[t];e&&e(n)}}(d),!0},e.close=function(e){e||(e={problem:"disconnected"}),e.command="close",window.clearInterval(i);const t=n;if(n=null,t&&t.close(),!f){v();for(const n in c)c[n].apply(null,[e])}},e.next_channel=function(){return t++,o+String(t)},e.send_data=function(e,t,o){if(!n)return!1;const i=w?w.length:0;for(let n=0;n<i;n++)if(void 0===t&&(t=A(e)),t||void 0!==o||(o=JSON.parse(e)),!1===w[n](e,t,o))return!1;return n.send(e),!0},e.send_message=function(n,t,o){if(E(t?"send "+t:"send control:",n),n.byteLength||Array.isArray(n)){n instanceof window.ArrayBuffer&&(n=new window.Uint8Array(n));const i=O([b(t),[10],n],!0);return e.send_data(i.buffer,t,o)}return e.send_data(t.toString()+"\n"+n,t,o)},e.send_control=function(t){if(n||"close"!=t.command&&"kill"!=t.command){if(!i||"hint"!=t.command||"ignore_transport_health_check"!=t.hint)return e.send_message(JSON.stringify(t),"",t);r=t.data}},e.register=function(e,n,t){c[e]=n,l[e]=t},e.unregister=function(e){delete c[e],delete l[e]}}function I(e){a||(a=new C);const n=a;n.ready?e(n):n.addEventListener("ready",(function(){e(n)}))}function B(e){const t=this;let o;S(t,{});let i=null,r=null,s=null,c=!1,l=!1,a=null;const u=!0===e.binary,d=[];function f(e){c?(console.warn("received message after done"),t.close("protocol-error")):t.dispatchEvent("message",e)}function p(e){r=e,t.valid=!1,o&&a&&o.unregister(a),r.message&&console.warn(r.message),t.dispatchEvent("close",r),s&&s.resolve(r)}function m(e){if("close"==e.command)return void p(e);"ready"==e.command&&function(e){i=e,t.dispatchEvent("ready",i)}(e);const n="done"===e.command;n&&c?(console.warn("received two done commands on channel"),t.close("protocol-error")):(n&&(c=!0),t.dispatchEvent("control",e))}function g(e){u||"string"!=typeof e&&(e=String(e)),o.send_message(e,a)}t.valid=!0,t.options=e,t.binary=u,t.id=a,I((function(n){if(o=n,r)return;a=o.next_channel(),t.id=a,o.register(a,m,f);const i={};for(const n in e)i[n]=e[n];for(i.command="open",i.channel=a,i.host||h&&(i.host=h),u?i.binary="raw":delete i.binary,i["flow-control"]=!0,o.send_control(i);d.length>0;){const e=d.shift();e[0]?(e[1].channel=a,o.send_control(e[1])):g(e[1])}})),t.send=function(e){r?console.warn("sending message on closed channel"):l?console.warn("sending message after done"):o?g(e):d.push([!1,e])},t.control=function(e){(e=e||{}).command||(e.command="options"),"done"===e.command&&(l=!0),e.channel=a,o?o.send_control(e):d.push([!0,e])},t.wait=function(e){s||(s=n.defer(),r?s.reject(r):i?s.resolve(i):(t.addEventListener("ready",(function(e,n){s.resolve(n)})),t.addEventListener("close",(function(e,n){s.reject(n)}))));const o=s.promise;return e&&o.then(e,e),o},t.close=function(e){r||(e?"string"==typeof e&&(e={problem:e}):e={},e.command="close",e.channel=a,o?o.send_control(e):d.push([!0,e]),p(e))},t.buffer=function(e){const n=[];function o(e,o){if(n.push(o),n.callback){const e=O(n,u);if(e.length>0){const o=n.callback.call(t,e);"number"!=typeof o||o===e.length?n.length=0:0===o?(n.length=1,n[0]=e):0!==o&&(n.length=1,e.subarray?n[0]=e.subarray(o):e.substring?n[0]=e.substring(o):n[0]=e.slice(o))}}}return n.callback=e,n.squash=function(){return O(n,u)},t.addEventListener("message",o),t.addEventListener("close",(function e(){t.removeEventListener("message",o),t.removeEventListener("close",e)})),n},t.toString=function(){const n=e.host||"localhost";return"[Channel "+(t.valid?a:"<invalid>")+" -> "+n+"]"}}v||(v=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),window.addEventListener("beforeunload",(function(){f=!0}),!1),window.addEventListener("unload",(function(){a&&a.close()})),window.cockpit=function(){function f(e){this.encoding="utf-8",this.encode=function(n,t){const o=window.unescape(encodeURIComponent(n));return e===String?o:b(o,e)}}function y(e){let n=null;this.encoding="utf-8",this.decode=function(t,o){const i=o&&o.stream;null==t&&(t=""),"string"!=typeof t&&(t=function(e){const n=e.length;let t="";for(let o=0;o<n;o++)t+=String.fromCharCode(e[o]);return t}(t)),n&&(t=n+t,n=null);const r=t.length;let s=0,c=0,l="";for(;c<r;){const o=t.charCodeAt(c),a=255==o?0:o>251&&o<254?6:o>247&&o<252?5:o>239&&o<248?4:o>223&&o<240?3:o>191&&o<224?2:o<128?1:0;let u=c+a<=r;if(!u&&i){n=t.substring(c);break}0===a&&(u=!1);for(let e=1;u&&e<a;e++)u=0!=(128&t.charCodeAt(c+e));if(u)c+=a;else{if(e){c=r;break}l+=decodeURIComponent(window.escape(t.substring(s,c))),l+="ï¿½",c++,s=c}}return l+=decodeURIComponent(window.escape(t.substring(s,c))),l}}n.channel=function(e){return new B(e)},n.event_target=function(e){return S(e,{}),e},n.extend=s,n.manifests={},n.utf8_encoder=function(e){return new f(e)},n.utf8_decoder=function(e){return new y(!!e)},n.base64_encode=k,n.base64_decode=_,n.kill=function(e,t){const o={};e&&(o.host=e),t&&(o.group=t),n.transport.control("kill",o)},n.hint=function(e,t){a&&(t||(t=h),"string"==typeof t&&(t={host:t}),t.hint=e,n.transport.control("hint",t))},n.transport=u={wait:I,inject:function(e,n){return!!a&&(void 0===n||n?a.send_data(e):a.dispatch_data({data:e}))},filter:function(e,n){n?(w||(w=[]),w.push(e)):(g||(g=[]),g.push(e))},close:function(e){a&&a.close(e?{problem:e}:void 0),a=null,this.options={}},origin:v,options:{},uri:j,control:function(e,n){(n=s({},n)).command=e,I((function(e){e.send_control(n)}))},application:function(){return!a||window.mock?x():a.application}};let E=[],L=null;function A(){const e=E;for(L=null,E=[];;){const n=e.shift();if(!n)break;n()}}function C(e){e&&E.push(e),null===L&&(L=window.setTimeout(A,0))}function M(e,n,t,o){if(void 0===n&&void 0===t&&void 0===o)return null;const i=new T;return e.pending=e.pending||[],e.pending.push([i,n,t,o]),e.status>0&&N(e),i.promise}function N(e){!e.process_scheduled&&e.pending&&(e.process_scheduled=!0,C((function(){!function(e){const n=e.pending;e.process_scheduled=!1,e.pending=void 0;for(let o=0,i=n.length;o<i;++o){e.pur=!0;const i=n[o][0],r=n[o][e.status];t(r)?i.resolve(r.apply(e.promise,e.values)):1===e.status?i.resolve.apply(i.resolve,e.values):i.reject.apply(i.reject,e.values)}}(e)})))}function U(e,n){let i,r=!1;(o(n[0])||t(n[0]))&&(i=n[0]&&n[0].then),t(i)?(e.status=-1,i.call(n[0],(function(){r||(r=!0,U(e,arguments))}),(function(){r||(r=!0,J(e,arguments))}),(function(){P(e,arguments)}))):(e.values=n,e.status=1,N(e))}function J(e,n){e.values=n,e.status=2,N(e)}function P(e,n){const o=e.pending;e.status<=0&&o&&o.length&&C((function(){for(let i=0,r=o.length;i<r;i++){const r=o[i][0],s=o[i][3];t(s)?r.notify(s.apply(e.promise,n)):r.notify.apply(r,n)}}))}function T(){const e=this,n={};e.promise=n.promise=function(e){const n=function(e){return e?(s(e,n),e):n};return e.status=0,n.then=function(t,o,i){return M(e,t,o,i)||n},n.catch=function(t){return M(e,null,t)||n},n.finally=function(t,o){return M(e,(function(){return q(arguments,!0,t)}),(function(){return q(arguments,!1,t)}),o)||n},n.done=function(t){return M(e,t),n},n.fail=function(t){return M(e,null,t),n},n.always=function(t){return M(e,t,t),n},n.progress=function(t){return M(e,null,null,t),n},n.state=function(){return 1==e.status?"resolved":2==e.status?"rejected":"pending"},n.promise=n,n}(n),e.resolve=function(){if(arguments[0]===n.promise)throw new Error("Expected promise to be resolved with other value than itself");return n.status||U(n,arguments),e},e.reject=function(){if(!n.status)return J(n,arguments),e},e.notify=function(){return P(n,arguments),e}}function D(e,t){const o=n.defer();return t?o.resolve.apply(o,e):o.reject.apply(o,e),o.promise}function q(e,n,o){let i=null;return t(o)&&(i=o()),i&&t(i.then)?i.then((function(){return D(e,n)}),(function(){return D(arguments,!1)})):D(e,n)}n.when=function(e,t,o,i){const r=n.defer();return r.resolve(e),r.promise.then(t,o,i)},n.resolve=function(e){return n.defer().resolve(e).promise},n.reject=function(e){return n.defer().reject(e).promise},n.defer=function(){return new T};const R=/\$\{([^}]+)\}|\$([a-zA-Z0-9_]+)/g;function $(e,t,o,i){let r=null;if(e||0===e){if("string"==typeof o){const n=[];for(const e in t)n.push(e);n.sort().reverse();for(let i=0;i<n.length;i++){for(let s=0;s<t[n[i]].length;s++)if(o==t[n[i]][s]){e/=Math.pow(n[i],s),r=o;break}if(r)break}}else if(o in t){let n=1;for(let i=0;i<t[o].length;i++){const s=e/n;if(s<o){e=s,r=t[o][i];break}n*=o}}}else r=null;const s=n.format_number(e);let c;return c=s&&r?[s,r]:[s],i||(c=c.join(" ")),c}n.format=function(e,n){function t(e,t,o){const i=n[t||o];return 0===i?"0":i||""}return 2==arguments.length&&o(n)&&null!==n||(n=Array.prototype.slice.call(arguments,1)),e.replace(R,t)},n.format_number=function(e){const t=void 0===n.language?void 0:n.language.replace("_","-");return e||0===e?e%1==0?e.toString():e>0&&e<=.001?.001.toLocaleString(t):e<0&&e>=-.001?(-.001).toLocaleString(t):e>999||e<-999?e.toFixed(0):e.toLocaleString(t,{maximumSignificantDigits:3,minimumSignificantDigits:3}):""};const G={1e3:[null,"KB","MB","GB","TB","PB","EB","ZB"],1024:[null,"KiB","MiB","GiB","TiB","PiB","EiB","ZiB"]};n.format_bytes=function(e,n,t){return void 0===n&&(n=1024),$(e,G,n,t)},n.get_byte_units=function(e,n){function t(e){return{name:G[n][e],factor:Math.pow(n,e)}}void 0!==n&&n in G||(n=1024);const o=[t(2),t(3),t(4)];for(let n=o.length-1;n>=0;n--)if(0===n||e/o[n].factor>=10){o[n].selected=!0;break}return o};const H={1024:["B/s","KiB/s","MiB/s","GiB/s","TiB/s","PiB/s","EiB/s","ZiB/s"]};n.format_bytes_per_sec=function(e,n,t){return void 0===n&&(n=1024),$(e,H,n,t)};const K={1e3:["bps","Kbps","Mbps","Gbps","Tbps","Pbps","Ebps","Zbps"]};function z(e){const t=this;let o;try{o=window[e]}catch(e){}t.prefixedKey=function(e){return n.transport.application()+":"+e},t.getItem=function(e,n){let i=o.getItem(t.prefixedKey(e));return!i&&n&&(i=o.getItem(e)),i},t.setItem=function(e,n,i){o.setItem(t.prefixedKey(e),n),i&&o.setItem(e,n)},t.removeItem=function(e,n){o.removeItem(t.prefixedKey(e)),n&&o.removeItem(e)},t.clear=function(e){let t=0;for(;t<o.length;){const i=o.key(t);e&&0!==i.indexOf("cockpit")||0===i.indexOf(n.transport.application())?o.removeItem(i):t++}}}function W(e){let n;if(e.parent&&e.parent!==e&&(n=W(e.parent)),!n)try{n=e["cv1-storage"],n||(e["cv1-storage"]=n={})}catch(e){}return n}function V(e,t,o){const i=this,r=n.transport.application()+":"+e,s=window.sessionStorage;let c;const l=W(window);let a,u=!1;function d(){if(void 0!==l[r]){const n=l[r];window.setTimeout((function(){!1===o(n,e)&&i.close()}))}}function f(e){if(a&&!u&&(u=!0),!u)return;const n=Math.floor(1e7*Math.random())+1,t=document.createEvent("StorageEvent");t.initStorageEvent("storage",!1,!1,r,null,n,window.location,s),l[r]=e,s.setItem(r,n),t.self=i,window.dispatchEvent(t)}function p(){if(a&&a.close&&a.close(),a=null,!u)return;u=!1;let e=s.getItem(r);if(e=e?parseInt(e,10):null,c&&c===e){const e=document.createEvent("StorageEvent"),n=s[r];e.initStorageEvent("storage",!1,!1,r,n,null,window.location,s),delete l[r],s.removeItem(r),e.self=i,window.dispatchEvent(e)}}function h(e){if(e.key!==r)return;if(e.self!==i){if(!e.newValue&&!u)return void i.claim()}else u&&!e.oldValue&&e.newValue!==s.getItem(r)&&p();let n=null;e.newValue&&(n=parseInt(e.newValue,10)),c!==n&&(c=n,d())}i.claim=function(){if(a)return;const n={close:function(){}};a=n;const o=t(f,e);a===n?a=o:o.close()},i.close=function(){window.removeEventListener("storage",h,!0),p()},window.addEventListener("storage",h,!0),window.addEventListener("beforeunload",(function(){i.close()})),window.addEventListener("unload",(function(){i.close()})),s.getItem(r)?d():i.claim()}function Z(e,n,t){const o=this;o.interval=e,o.limit=n?65536:1024;const i=function(e){if(!e)return[];const n=W(window);let t=n[e];t||(n[e]=t=[]);return t}(n);let r=0,s=null,c=null;function l(e,n){let t=0,o=e.length-1;for(;t<=o;){const i=(t+o)/2|0,r=e[i].beg;if(r<n)t=i+1;else{if(!(r>n))return i;o=i-1}}return t}function a(e,n,o){t&&(o||u(e,new Array(n-e),{}),t(e,n,o))}function u(e,n,t){if(!n.length)return;let a=l(i,e);const u=e+n.length,d=i.length;let f;for(f=a>0?a-1:a;f<d;f++){const n=i[f],t=n.items.length;if(!t)continue;const o=n.beg,s=Math.max(o,e),c=Math.min(o+t,u);if(s<c){const e=c-s;n.items.splice(s-o,e),r-=e,s-o==0&&(n.beg+=c-o)}else if(f>=a)break}const p={beg:e,items:n,mapping:t};for(s||(s=p),c&&(c.next=p),c=p,r+=n.length,i.splice(a,0,p),a--;a<=f;a++){const e=i[a];e&&!e.items.length&&(i.splice(a,1),a--)}for(;s&&r>o.limit;)r-=s.items.length,s.items=[],s.mapping=null,s=s.next||null;const h=i.length;for(f=0;f<h&&!(i[f].items.length>0);f++);i.splice(0,f)}o.load=function(e,n,t){if(n<=e)return;const o=l(i,e),r=i.length;let s=e;const c=[];for(let t=o>0?o-1:o;t<r;t++){const r=i[t],l=r.items.length;if(!l)continue;const a=r.beg,u=Math.max(a,e),d=Math.min(a+l,n);if(u<d)u>s&&c.push([s,u]),f(u,r.items.slice(u-a,d-a),r.mapping),s=d;else if(t>=o)break}for(let e=0;e<c.length;e++)a(c[e][0],c[e][1],t);s!=n&&a(s,n,t)};const d={};function f(e,n,t){const o=e+n.length;for(const i in d){const r=d[i],s=r.grid,c=Math.max(e,s.beg),l=Math.min(o,s.end);if(c<l){const o=c-e,i=c-s.beg,a=l-c;for(let e=0;e<a;e++){const s=r.links.length;for(let c=0;c<s;c++){const s=r.links[c][0],l=r.links[c][1];let a=n[o+e],u=t;const d=s.length;for(let e=0;void 0!==a&&e<d;e++)a?null!=u?(u=u[s[e]],a=u?a[u[""]]:a[s[e]]):a=a[s[e]]:a=void 0;l[i+e]=a}}s.notify(i,a)}}}o._register=function(n,t){if(n.interval!=e)throw Error("mismatched metric interval between grid and sink");let o=d[t];return o||(o=d[t]={grid:n,links:[]},o.links.remove=function(){delete d[t]}),o.links},o.input=function(e,n,t){f(e,n,t),u(e,n,t)},o.close=function(){for(const e in d){const n=d[e];n&&n.grid&&n.grid.remove_sink(o)}}}n.format_bits_per_sec=function(e,n,t){return void 0===n&&(n=1e3),$(e,K,n,t)},n.localStorage=new z("localStorage"),n.sessionStorage=new z("sessionStorage"),n.cache=function(e,n,t){return new V(e,n,t)},n.series=function(e,n,t){return new Z(e,n,t)};let F=1;function Y(e,n,i){const s=this;S(s,{});const c=[];s.interval=e,s.beg=0,s.end=0;const l=[],a=[];let u=0;const d="g1-"+F;F+=1;let f=null,p=null;function h(e,n,t){void 0===n&&(n=e+(s.end-s.beg)),n<e&&(e=n),s.beg=e,s.end=n,c.length&&(c.forEach((function(e){e.length=0})),s.sync(t))}function m(){window.clearInterval(f),f=null,p=null}s.notify=function(e,n){if(u)return;if(e+n>s.end-s.beg&&(n=s.end-s.beg-e),n<=0)return;const t=l.length;for(let o=0;o<t;o++){const t=l[o][0],i=l[o][1];t.call(s,i,e,n)}s.dispatchEvent("notify",e,n)},s.add=function(){const e=[];if(c.push(e),o(arguments[0])){const n=arguments[0].series||arguments[0];let t=arguments[1];t?"string"==typeof t&&(t=t.split(".")):t=[];const o=n._register(s,d);o.length||a.push({sink:n,links:o}),o.push([t,e])}else if(t(arguments[0])){const n=[arguments[0],e];!0===arguments[1]?l.unshift(n):l.push(n)}else if(0!==arguments.length)throw Error("invalid args to grid.add()");return e},s.remove=function(e){let n=a.length;for(let t=0;t<n;t++){const n=a[t].links.length;for(let o=0;o<n;o++)if(a[t].links[o][1]===e){a[t].links.splice(o,1);break}}n=c.length;for(let t=0;t<n;t++)if(c[t]===e){c.splice(t,1);break}},s.remove_sink=function(e){const n=a.length;for(let t=0;t<n;t++)if(a[t].sink===e){a[t].links.remove(),a.splice(t,1);break}},s.sync=function(e){u++;const n=a.length;for(let t=0;t<n;t++){a[t].sink.load(s.beg,s.end,e)}u--,s.notify(0,s.end-s.beg)},s.move=function(e,n){m();let t=null;void 0===e?e=0:r(e)&&(t=Date.now(),e=Math.floor(t/s.interval)+e),void 0!==n&&r(n)&&(null===t&&(t=Date.now()),n=Math.floor(t/s.interval)+n),h(e,n,!1)},s.walk=function(){const e=Date.now();s.interval>2e9||(m(),p=e-s.beg*s.interval,f=window.setInterval((function(){const e=Date.now();h(Math.floor((e-p)/s.interval),void 0,!0)}),s.interval))},s.close=function(){for(m();a.length;)a.pop().links.remove()},s.move(n,i)}function Q(e,t){this.problem=e,this.message=t||n.message(e),this.toString=function(){return this.message}}n.grid=function(e,n,t){return new Y(e,n,t)},n.logout=function(e,t){n.sessionStorage.clear(!0),n.localStorage.removeItem("login-data",!0),n.localStorage.clear(!1),!1!==e&&(d=!0),I((function(e){e.send_control({command:"logout",disconnect:!0})||window.location.reload(d)})),window.sessionStorage.setItem("logout-intent","explicit"),t&&window.sessionStorage.setItem("logout-reason",t)},n.drop_privileges=function(){I((function(e){e.send_control({command:"logout",disconnect:!1})}))},n.info={},S(n.info,{}),p=function(e){e.system&&s(n.info,e.system),e.system&&n.info.dispatchEvent("changed")};let X=null;n.user=function(){const e=n.defer();if(X)e.resolve(X);else{const t=n.dbus(null,{bus:"internal"});t.call("/user","org.freedesktop.DBus.Properties","GetAll",["cockpit.User"],{type:"s"}).then((([n])=>{X={id:n.Id.v,name:n.Name.v,full_name:n.Full.v,groups:n.Groups.v,home:n.Home.v,shell:n.Shell.v},e.resolve(X)})).catch((n=>e.reject(n))).finally((()=>t.close()))}return e.promise},document.addEventListener("click",(function(e){e.target.classList&&function(e,n){const t=e.length;for(let o=0;o<t;o++)if(n===e[o])return!0;return!1}(e.target.classList,"disabled")&&e.stopPropagation()}),!0);let ee=null;function ne(){return window.location.href.split("#")[1]||""}function te(){const t=this,o=n.transport.application();t.url_root=e||"",0===o.indexOf("cockpit+=")&&(t.url_root&&(t.url_root+="/"),t.url_root=t.url_root+o.replace("cockpit+",""));const i=ne(),r={};function s(e){const n=e.split("/").map(decodeURIComponent);let o,i,r=[];for(t.url_root&&(r=t.url_root.split("/").map(decodeURIComponent)),e&&"/"!==e[0]?(o=[].concat(t.path),o.pop(),o=o.concat(n)):o=n,o=function(e){const n=[],t=e.length;for(let o=0;o<t;o++){const t=e[o];if(""!==t&&"."!=t)if(".."==t){if(0===n.length)return null;n.pop()}else n.push(t)}return n}(o),i=0;i<r.length&&r[i]===o[i];i++);return i==r.length&&o.splice(0,r.length),o}function c(e,n,o){"string"==typeof e&&(e=s(e));let i,r="/"+e.map(encodeURIComponent).join("/");o&&t.url_root&&r.indexOf("/"+t.url_root+"/"!==0)&&(r="/"+t.url_root+r),r=r.replace("%40","@"),r=r.replace("%3D","="),r=r.replace(/%2B/g,"+");const c=[];function l(e){c.push(encodeURIComponent(i)+"="+encodeURIComponent(e))}if(n){for(i in n){let e=n[i];Array.isArray(e)||(e=[e]),e.forEach(l)}c.length>0&&(r+="?"+c.join("&"))}return r}function l(e,n){"#"==e[0]&&(e=e.substr(1));const t=e.indexOf("?");let o=e;o=-1===t?e:e.substr(0,t);const i=s(o);return-1!==t&&n&&e.substring(t+1).split("&").forEach((function(e){const t=e.split("="),o=decodeURIComponent(t[0]),i=decodeURIComponent(t[1]);if(n[o]){let e=n[o];Array.isArray(i)||(e=n[o]=[e]),e.push(i)}else n[o]=i})),i}function a(){let e;if(1==arguments.length&&arguments[0]instanceof te)e=String(arguments[0]);else if("string"==typeof arguments[0]){const n=arguments[1]||{};e=c(l(arguments[0],n),n)}else e=c.apply(t,arguments);return e}t.path=l(i,r),Object.defineProperties(t,{path:{enumerable:!0,writable:!1,value:t.path},options:{enumerable:!0,writable:!1,value:r},href:{enumerable:!0,value:i},go:{value:function(){if(t!==ee)return;const e=a.apply(t,arguments);window.location.hash="#"+e}},replace:{value:function(){if(t!==ee)return;const e=a.apply(t,arguments);window.location.replace(window.location.pathname+"#"+e)}},encode:{value:c},decode:{value:l},toString:{value:function(){return i}}})}function oe(e,t){this.problem=e.problem||null,this.exit_status=e["exit-status"],void 0===this.exit_status&&(this.exit_status=null),this.exit_signal=e["exit-signal"],void 0===this.exit_signal&&(this.exit_signal=null),this.message=e.message,void 0===this.message?this.problem?this.message=n.message(e.problem):null!==this.exit_signal?this.message=n.format(me("$0 killed with signal $1"),t,this.exit_signal):void 0!==this.exit_status?this.message=n.format(me("$0 exited with code $1"),t,this.exit_status):this.message=n.format(me("$0 failed"),t):this.message=this.message.trim(),this.toString=function(){return this.message}}function ie(){"all"!=window.debugging&&"spawn"!=window.debugging||console.debug.apply(console,arguments)}function re(){"all"!=window.debugging&&"dbus"!=window.debugging||console.debug.apply(console,arguments)}function se(e,t){"string"==typeof e?(this.problem=e,this.name=null,this.message=t||n.message(e)):(this.problem=null,this.name=e[0],this.message=e[1][0]||e[0]),this.toString=function(){return this.message}}function ce(){const e=this;let n=[];function t(e,t,o){const i=n.slice(),r=i.length;for(let n=0;n<r;n++){const r=i[n];r[0]&&r[0]!==e||r[1]&&r[1]!==t||r[2](o,e)}}e.data={},e.meta={},e.connect=function(e,t,o,i){const r=[e,t,o];return i?n.unshift(r):n.push(r),{remove:function(){const i=n.length;for(let r=0;r<i;r++){const i=n[r];if(i[0]===e&&i[1]===t&&i[2]===o){delete i[r];break}}}}},e.update=function(n,o,i){e.data[n]||(e.data[n]={}),e.data[n][o]?i=s(e.data[n][o],i):e.data[n][o]=i,t(n,o,i)},e.remove=function(n,o){e.data[n]&&(delete e.data[n][o],t(n,o,null))},e.lookup=function(n,t){if(e.data[n])return e.data[n][t]},e.each=function(n,t){for(const o in e.data)for(const i in e.data[o])i==n&&t(e.data[o][n],o)},e.close=function(){e.data={};const t=n;n=[];const o=t.length;for(let e=0;e<o;e++)t[e].callback()}}function le(e,t,o,i,r){const c=this;S(c,{});let l=!1,a=!1;const u=n.defer();function d(r){r?(s(c.data,r),a||function(){if(!t.meta[o])return;const r=t.meta[o];a=!0,Object.keys(r.methods||{}).forEach((function(t){t[0].toLowerCase()!=t[0]&&Object.defineProperty(c,t,{enumerable:!1,value:function(){const r=n.defer();return e.call(i,o,t,Array.prototype.slice.call(arguments)).done((function(e){r.resolve.apply(r,e)})).fail((function(e){r.reject(e)})),r.promise}})})),Object.keys(r.properties||{}).forEach((function(t){if(t[0].toLowerCase()==t[0])return;const s={enumerable:!0,get:function(){return c.data[t]},set:function(e){throw Error(t+"is not writable")}},l=r.properties[t];l.flags&&-1!==l.flags.indexOf("w")&&(s.set=function(r){e.call(i,"org.freedesktop.DBus.Properties","Set",[o,t,n.variant(l.type,r)]).fail((function(e){console.log("Couldn't set "+o+" "+t+" at "+i+": "+e)}))}),Object.defineProperty(c,t,s)}))}(),l=!0):l=!1,c.dispatchEvent("changed",r)}function f(e){l?u.resolve():u.reject(e)}Object.defineProperties(c,{client:{value:e,enumerable:!1,writable:!1},path:{value:i,enumerable:!1,writable:!1},iface:{value:o,enumerable:!1,writable:!1},valid:{get:function(){return l},enumerable:!1},wait:{enumerable:!1,writable:!1,value:function(e){return e&&u.promise.always(e),u.promise}},call:{value:function(n,t,r){return e.call(i,o,n,t,r)},enumerable:!1,writable:!1},data:{value:{},enumerable:!1}}),"function"==typeof window.$&&Object.defineProperty(c,window.$.expando,{value:{},writable:!0,enumerable:!1}),r||(r={}),t.connect(i,o,d,!0),d(t.lookup(i,o)),e.subscribe({path:i,interface:o},(function(e,n,t,o){c.dispatchEvent("signal",t,o),t[0].toLowerCase()!=t[0]&&((o=o.slice()).unshift(t),c.dispatchEvent.apply(c,o))}),!1!==r.subscribe),!1!==r.watch?e.watch({path:i,interface:o}).always(f):f()}function ae(e,t,o,i,r){const c=this;let l;S(c,{}),Object.defineProperties(c,{client:{value:e,enumerable:!1,writable:!1},iface:{value:o,enumerable:!1,writable:!1},path_namespace:{value:i,enumerable:!1,writable:!1},wait:{enumerable:!1,writable:!1,value:function(e){return e&&l.always(e),l}}}),"function"==typeof window.$&&Object.defineProperty(c,window.$.expando,{value:{},writable:!0,enumerable:!1});const a={interface:o,path_namespace:i};function u(n,t){let i=c[t];t&&(!n&&i?(delete c[t],c.dispatchEvent("removed",i)):n&&(i||(i=c[t]=e.proxy(o,t,r),c.dispatchEvent("added",i)),c.dispatchEvent("changed",i)))}e.subscribe(a),l=!1!==r.watch?e.watch(a):n.defer().resolve().promise,r=s({watch:!1,subscribe:!1},r),t.connect(null,o,u,!1),t.each(o,u)}function ue(e,t){const o=this;S(o,{});const r={};let c=!1,l=null;t&&(t.track&&(c=!0),delete t.track,s(r,t)),r.payload="dbus-json3",e&&(r.name=e),o.options=t,o.unique_name=null,re("dbus open: ",r);let a=n.channel(r);const u={},d={};let f,p,h={};function m(){f||(f=new ce)}function g(e){return!(!a||!a.valid)&&(re("dbus:",e),a.send(e),!0)}function w(e,t){let i;re("dbus:",t);try{i=JSON.parse(t)}catch(e){console.warn("received invalid dbus json message:",e)}if(void 0===i)return void a.close({problem:"protocol-error"});const r=void 0!==i.id?h[i.id]:void 0;if(i.reply){if(r){const e={};i.type&&(e.type=i.type),i.flags&&(e.flags=i.flags),r.resolve(i.reply[0]||[],e),delete h[i.id]}}else i.error?r&&(r.reject(new se(i.error)),delete h[i.id]):C((function(){if(i.signal)for(const n in u){const t=u[n];t.callback&&(e=i.signal,(r=t.match).path&&e[0]!==r.path||r.path_namespace&&0!==e[0].indexOf(r.path_namespace)||r.interface&&e[1]!==r.interface||r.member&&e[2]!==r.member||r.arg0&&(!e[3]||e[3][0]!==r.arg0)||t.callback.apply(o,i.signal))}else i.call?function(e,t){const o=function(e){const t=e[0],o=e[1],i=e[2],r=d[t+"\n"+o],s=f.meta[o];return r&&s?s.methods&&i in s.methods?"function"!=typeof r[i]?function(e,n,t){return console.warn("method is not implemented properly: ",e,n,t),E(e,n,t)}(t,o,i):r[i].apply(r,e[3]):E(t,o,i):function(e,t){const o="DBus interface "+t+" not available at "+e;return n.reject(new se(["org.freedesktop.DBus.Error.UnknownInterface",[o]]))}(t,o)}(e);if(!t)return;n.when(o).then((function(){let e=Array.prototype.slice.call(arguments,0);1==e.length&&void 0===e[0]&&(e=[]),g(JSON.stringify({reply:[e],id:t}))}),(function(e){const o=[];o[0]=e.name||" org.freedesktop.DBus.Error.Failed",o[1]=[n.message(e)||o[0]],g(JSON.stringify({error:o,id:t}))}))}(i.call,i.id):i.notify?b(i.notify):i.meta?v(i.meta):void 0!==i.owner?(o.dispatchEvent("owner",i.owner),c&&l&&o.close(),l=i.owner):re("received unexpected dbus json message:",t);var e,r}))}function v(e){m(),s(f.meta,e),o.dispatchEvent("meta",e)}function b(e){m();for(const n in e)for(const t in e[n]){const o=e[n][t];o?f.update(n,t,o):f.remove(n,t)}o.dispatchEvent("notify",e)}function y(e){p=e.problem||"disconnected";const n=h;h={};for(const t in n)n[t].reject(new se(p,e.message));o.dispatchEvent("close",e)}function k(e,n){re("dbus ready:",t),o.unique_name=n["unique-name"]}o.constructors={"*":le},o.wait=a.wait,o.meta=function(e,n){if(!a||!a.valid)return;const t=s({},n,{meta:e});g(JSON.stringify(t)),v(e)},this.notify=b,this.close=function(e){"string"==typeof e&&(e={problem:e}),e||(e={}),a?a.close(e):y(e)},a.addEventListener("ready",k),a.addEventListener("message",w),a.addEventListener("close",(function e(n,t){re("dbus close:",t),a.removeEventListener("ready",k),a.removeEventListener("message",w),a.removeEventListener("close",e),a=null,y(t)}));let _=1;function E(e,t,o){const i="DBus method "+t+" "+o+" not available at "+e;return n.reject(new se(["org.freedesktop.DBus.Error.UnknownMethod",[i]]))}this.call=function(e,t,o,i,r){const c=n.defer(),l=String(_);_++;const a=s({},r,{call:[e,t,o,i||[]],id:l});return g(JSON.stringify(a))?h[l]=c:c.reject(new se(p)),c.promise},o.signal=function(e,n,t,o,i){if(!a||!a.valid)return;const r=s({},i,{signal:[e,n,t,o||[]]});g(JSON.stringify(r))},this.subscribe=function(e,n,t){const o={match:s({},e),callback:n};let i;return!1!==t&&g(JSON.stringify({"add-match":o.match})),n&&(i=String(_),_++,u[i]=o),{remove:function(){let e;i&&(e=u[i],e&&delete u[i]),!1!==t&&e&&g(JSON.stringify({"remove-match":e.match}))}}},o.watch=function(e){const t=i(e)?s({},e):{path:String(e)},o=String(_);_++;const r=n.defer();g(JSON.stringify({watch:t,id:o}))?h[o]=r:r.reject(new se(p));const c=r.promise;return c.remove=function(){o in h&&(r.reject(new se("cancelled")),delete h[o]),g(JSON.stringify({unwatch:t}))},c},o.publish=function(e,t,o,i){const r=[e,t],c=String(_);_++;const l=h[c]=n.defer();g(JSON.stringify(s({},i,{publish:r,id:c})))?h[c]=l:l.reject(new se(p));const a=e+"\n"+t;l.promise.then((function(){d[a]=o}));const u=l.promise;return u.remove=function(){c in h&&(l.reject(new se("cancelled")),delete h[c]),delete d[a],g(JSON.stringify({unpublish:r}))},u},o.proxy=function(n,t,i){n||(n=e),n=String(n),t||(t="/"+n.replace(/\./g,"/"));let r=o.constructors[n];return r||(r=o.constructors["*"]),i||(i={}),m(),new r(o,f,n,String(t),i)},o.proxies=function(n,t,i){return n||(n=e),t||(t="/"),i||(i={}),m(),new ae(o,f,String(n),String(t),i)}}Object.defineProperty(n,"location",{enumerable:!0,get:function(){return ee&&ee.href===ne()||(ee=new te),ee},set:function(e){n.location.go(e)}}),window.addEventListener("hashchange",(function(){ee=null;let e=window.location.hash;0===e.indexOf("#")&&(e=e.substring(1)),n.hint("location",{hash:e}),n.dispatchEvent("locationchanged")})),n.jump=function(e,t){e=Array.isArray(e)?"/"+e.map(encodeURIComponent).join("/").replace("%40","@").replace("%3D","=").replace(/%2B/g,"+"):""+e,void 0===t&&(t=n.transport.host);const o={command:"jump",location:e,host:t};n.transport.inject("\n"+JSON.stringify(o))},function(){let e,t=!1;function o(){let o=document[e];e&&void 0!==o||(o=!1),!1===o&&(o=t),n.hidden!==o&&(n.hidden=o,n.dispatchEvent("visibilitychange"))}void 0!==document.hidden?(e="hidden",document.addEventListener("visibilitychange",o)):void 0!==document.mozHidden?(e="mozHidden",document.addEventListener("mozvisibilitychange",o)):void 0!==document.msHidden?(e="msHidden",document.addEventListener("msvisibilitychange",o)):void 0!==document.webkitHidden&&(e="webkitHidden",document.addEventListener("webkitvisibilitychange",o)),m=function(e){"hidden"in e&&(t=e.hidden,o())},o()}(),n.spawn=function(e,t){const o=n.defer(),i={payload:"stream",spawn:[]};if(e instanceof Array)for(let n=0;n<e.length;n++)i.spawn.push(String(e[n]));else i.spawn.push(String(e));void 0!==t&&s(i,t);const r=i.spawn[0]||"process",c=n.channel(i),a=c.buffer(null);c.addEventListener("close",(function(e,n){const t=a.squash();ie("process closed:",JSON.stringify(n)),t&&ie("process output:",t),void 0!==n.message&&ie("process error:",n.message),n.problem?o.reject(new oe(n,r)):n["exit-status"]||n["exit-signal"]?o.reject(new oe(n,r),t):void 0!==n.message?o.resolve(t,n.message):o.resolve(t)}));const u=o.promise;return u.stream=function(e){return a.callback=e.bind(u),this},u.input=function(e,n){return null!=e&&(ie("process input:",e),l(e,(function(e){c.send(e)}))),n||c.control({command:"done"}),this},u.close=function(e){return ie("process closing:",e),c.valid&&c.close(e),this},u},n.script=function(e,t,o){!o&&i(t)&&(o=t,t=[]);const r=["/bin/sh","-c",e,"--"];return r.push.apply(r,t),n.spawn(r,o)};const de={internal:null,session:null,system:null};n.dbus=function(e,n){n||(n={bus:"system"});const t=Object.keys(n),o=n.bus,i=!e&&1==t.length&&o in de;if(i&&de[o])return de[o];const r=new ue(e,n);if(i){const e=r.close;r.close=function(){arguments.length>0&&e.apply(r,arguments)},r.addEventListener("close",(function(){de[o]==r&&(de[o]=null)})),de[o]=r}return r},n.variant=function(e,n){return{v:n,t:e}},n.byte_array=function(e){return window.btoa(e)},n.file=function(e,t){const o=(t=t||{}).binary,i={path:e,read:d,replace:p,modify:function(e,t,o){const i=n.defer();function r(n,t){let o=e(n);void 0===o&&(o=n),p(o,t).done((function(e){i.resolve(o,e)})).fail((function(e){"change-conflict"==e.problem?s():i.reject(e)}))}function s(){d().done(r).fail((function(e){i.reject(e)}))}void 0===t?s():r(t,o);return i.promise},watch:function(e,n){e&&h.push(e);return g+=1,v(n),m=null,d(),{remove:function(){if(e){const n=h.indexOf(e);n>-1&&(h[n]=null)}g-=1,v(n)}}},close:function(){a&&a.close("cancelled");f&&f.close("cancelled");w&&w.close("cancelled")}},r=s({},t);delete r.syntax;let a,u=null;function d(){if(u)return u;const i=n.defer(),c=s({},r,{payload:"fsread1",path:e});return function e(){a=n.channel(c);const r=[];a.addEventListener("message",(function(e,n){r.push(n)})),a.addEventListener("close",(function(n,s){if(a=null,"change-conflict"==s.problem)return void e();if(u=null,s.problem){const e=new Q(s.problem,s.message);return b(null,null,e),void i.reject(e)}let c;if("-"==s.tag)c=null;else try{l=O(r,o),c=t.syntax&&t.syntax.parse?t.syntax.parse(l):l}catch(e){return b(null,null,e),void i.reject(e)}var l;b(c,s.tag),i.resolve(c,s.tag)}))}(),u=i.promise,u}let f=null;function p(o,i){const c=n.defer();let a;try{a=null===o?null:(u=o,t.syntax&&t.syntax.stringify?t.syntax.stringify(u):u)}catch(e){return c.reject(e),c.promise}var u;f&&f.close("abort");const d=s({},r,{payload:"fsreplace1",path:e,tag:i});return f=n.channel(d),f.addEventListener("close",(function(e,n){f=null,n.problem?c.reject(new Q(n.problem,n.message)):(b(o,n.tag),c.resolve(n.tag))})),l(a,(function(e){f.send(e)})),f.control({command:"done"}),c.promise}const h=[];let m,g=0,w=null;function v(t){if(g>0){if(w)return;const o={payload:"fswatch1",path:e,superuser:r.superuser};w=n.channel(o),w.addEventListener("message",(function(n,o){let i;try{i=JSON.parse(o)}catch(e){i=null}i&&i.path==e&&i.tag&&i.tag!=m&&(t&&void 0!==t.read&&!t.read?b(null,i.tag):d())}))}else w&&(w.close(),w=null)}function b(){m=arguments[1]||null,c(h,i,arguments)}return i};let fe,pe={};function he(e){return!0===e?1:e||0}n.language="en",n.locale=function(e){let t,o=n.language;e?(s(pe,e),t=e[""]):null===e&&(pe={}),t&&(t["plural-forms"]&&(fe=t["plural-forms"]),t.language&&(o=t.language)),n.language=o},n.translate=function(){let e;e=0===arguments.length?[document]:1===arguments.length&&arguments[0].length?arguments[0]:arguments;const t=e.length;for(let o=0;o<t;o++){let t=null;if(e[o].querySelectorAll&&(t=e[o].querySelectorAll("[translatable], [translate]")),t)for(let e=0;e<t.length;e++){const o=t[e];let i=o.getAttribute("translate")||o.getAttribute("translatable")||"yes";if("no"==i)continue;const r=i.split(" ");i=o.getAttribute("translate-context")||o.getAttribute("context");for(let e=0;e<r.length;e++)"yes"==r[e]||"translate"==r[e]?o.textContent=n.gettext(i,o.textContent):r[e]&&o.setAttribute(r[e],n.gettext(i,o.getAttribute(r[e])||""));o.removeAttribute("translatable"),o.removeAttribute("translate")}}},n.gettext=function(e,n){1==arguments.length&&(n=e,e=void 0);const t=e?e+""+n:n;if(pe){const e=pe[t];if(e&&e[1])return e[1]}return n},n.ngettext=function(e,n,t,o){3==arguments.length&&(o=t,t=n,n=e,e=void 0);const i=e?e+""+n:n;if(pe&&fe){const e=pe[i];if(e){const n=he(fe(o))+1;if(e[n])return e[n]}}return 1==o?n:t},n.noop=function(e,n){return arguments[arguments.length-1]};const me=n.gettext;function ge(e,n,t){this.status=parseInt(e,10),this.reason=n,this.message=t||n,this.problem=null,this.valueOf=function(){return this.status},this.toString=function(){return this.status+" "+this.message}}function we(){"all"!=window.debugging&&"http"!=window.debugging||console.debug.apply(console,arguments)}function ve(e,n){if(e){n=n.toLowerCase();for(const t in e)if(t.toLowerCase()==n)return e[t]}}function be(e,t){const o=this;o.options=t,t.payload="http-stream2";const r=[];if(void 0!==e)if(e.indexOf&&0===e.indexOf("/"))t.unix=e;else{const n=parseInt(e,10);if(isNaN(n))throw Error("The endpoint must be either a unix path or port number");t.port=n}function a(e){return Object.keys(e).map((function(n){return encodeURIComponent(n)+"="+encodeURIComponent(e[n])})).join("&").split("%20").join("+")}t.address&&(t.capabilities||(t.capabilities=[]),t.capabilities.push("address")),o.request=function(e){const o=n.defer(),i=o.promise;e.path||(e.path="/"),e.method||(e.method="GET"),e.params&&(-1===e.path.indexOf("?")?e.path+="?"+a(e.params):e.path+="&"+a(e.params)),delete e.params;const u=e.body;delete e.body;const d=e.headers;delete e.headers,s(e,t),t.headers&&d?e.headers=s({},t.headers,d):t.headers?e.headers=t.headers:e.headers=d,we("http request:",JSON.stringify(e));const f=n.channel(e);void 0!==u&&(""!==u&&(we("http input:",u),l(u,(function(e){f.send(e)}))),we("http done"),f.control({command:"done"}));let p=null,h=null,m=null;const g=f.buffer((function(e){return m&&m.status>=200&&m.status<=299&&p?p.call(i,e):0}));function w(e,n){"response"==n.command&&(m=n,h&&(m.headers=m.headers||{},c(h,i,[m.status,m.headers])))}return f.addEventListener("control",w),f.addEventListener("close",(function e(n,t){const s=r.indexOf(i);if(s>=0&&r.splice(s,1),t.problem)we("http problem: ",t.problem),o.reject(new Q(t.problem));else{const e=g.squash();if(m&&(m.status<200||m.status>299)){let n;const t=ve(m.headers,"Content-Type");t&&!f.binary&&0===t.indexOf("text/plain")&&(n=e),we("http status: ",m.status),o.reject(new ge(m.status,m.reason,n),e)}else we("http done"),o.resolve(e)}f.removeEventListener("control",w),f.removeEventListener("close",e)})),i.stream=function(e){return p=e,i},i.response=function(e){return null===h&&(h=[]),h.push(e),i},i.input=function(e,n){return null!=e&&(we("http input:",e),l(e,(function(e){f.send(e)}))),n||(we("http done"),f.control({command:"done"})),i},i.close=function(e){return we("http closing:",e),f.close(e),i},r.push(i),i},o.get=function(e,n,t){return o.request({method:"GET",params:n,path:e,body:"",headers:t})},o.post=function(e,n,t){return t=t||{},i(n)||Array.isArray(n)?(n=JSON.stringify(n),void 0===ve(t,"Content-Type")&&(t["Content-Type"]="application/json")):null==n?n="":"string"!=typeof n&&(n=String(n)),o.request({method:"POST",path:e,body:n,headers:t})},o.close=function(e){const n=r.slice();for(let t=0;t<n.length;t++)n[t].close(e)}}function ye(e){const t=this;S(t,{});const o=n.dbus(null,{bus:"internal"}).proxy("cockpit.Superuser","/superuser");function i(){o.valid&&null!==t.allowed&&t.allowed!=("none"!=o.Current)&&window.location.reload(!0)}o.addEventListener("changed",i),t.allowed=null,t.user=e?e.user:null,t.is_superuser=e?e._is_superuser:null;let r=null,s=!1;function c(e){return 0===e.id||(r?!!(e.groups||[]).includes(r):s?t.is_superuser:void 0===e.id&&null)}e&&(r=e.group),e&&e.admin&&(s=!0),t.user&&null!==t.is_superuser?t.allowed=c(t.user):Promise.all([n.user(),new Promise(((e,t)=>{const o=n.channel({payload:"null",superuser:"require"});o.wait().then((()=>e(!0))).catch((()=>e(!1))).always((()=>o.close()))}))]).then((([e,n])=>{t.user=e,t.is_superuser=n;const o=c(e);t.allowed!==o&&(t.allowed=o,i(),t.dispatchEvent("changed"))})),t.close=function(){}}function ke(e,t,o){const i=this;S(i,{}),void 0===t.length&&(t=[t]);const r=[];let c=!1;function l(t,o,a){if(0===t.length)return;if(!a){if(c)return;c=!0}const u=s({payload:"metrics1",interval:e,source:"internal"},t[0]);delete u.archive_source;const d=n.channel(u);r.push(d);let f,p=null,h=null;d.addEventListener("close",(function(e,n){a||(c=!1),t.length>1&&("not-supported"==n.problem||"not-found"==n.problem)?l(t.slice(1),o):n.problem?"terminated"==n.problem||"disconnected"==n.problem||"authentication-failed"==n.problem||"not-found"==n.problem&&a||"not-supported"==n.problem&&a||console.warn("metrics channel failed: "+n.problem):a&&(i.archives||(i.archives=!0,i.dispatchEvent("changed")))})),d.addEventListener("message",(function(n,r){const s=JSON.parse(r),c=s.length;if(void 0===c){p=s;let n=0;p.now&&p.timestamp&&(n=p.timestamp+(Date.now()-p.now)),f=Math.floor(n/e),o(f,p,null,t[0]),i.meta=p,i.dispatchEvent("changed")}else if(p){for(let e=0;e<c;e++){const n=s[e];if(h)for(let e=0;e<h.length;e++){const t=n[e];if(null==t)n[e]=h[e];else{const n=t.length;if(void 0!==n){const o=h[e],i=h[e].length;let r;for(r=0;r<n;r++)null===t[r]&&(t[r]=o[r]);for(;r<i;r++)t[r]=o[r]}}}h=n}o(f,p,s,t[0]),f+=c,p.timestamp+=e*c}}))}function a(e,n,t,o){let r=n.mapping;r||(r={},n.metrics.forEach((function(e,n){const t={"":n},i=o.metrics_path_names?o.metrics_path_names[n]:e.name;r[i]=t,e.instances&&e.instances.forEach((function(e,n){""===e&&(e="/"),t[e]={"":n}}))})),n.mapping=r),t&&i.series.input(e,t,r)}i.series=n.series(e,o,(function(e,n,t){t?i.follow():i.fetch(e,n)})),i.archives=null,i.meta=null,i.fetch=function(n,o){const i=n*e-Date.now(),r=o-n,c=[];for(let e=0;e<t.length;e++)t[e].archive_source&&c.push(s({},t[e],{source:t[e].archive_source,timestamp:i,limit:r}));l(c,a,!0)},i.follow=function(){l(t,a)},i.close=function(e){const n=r.length;i.series&&i.series.close();for(let t=0;t<n;t++)r[t].close(e)}}n.message=function(e){if(e.message)return e.message;let n=null;return n=e.problem?e.problem:e+"","terminated"==n?me("Your session has been terminated."):"no-session"==n?me("Your session has expired. Please log in again."):"access-denied"==n?me("Not permitted to perform this action."):"authentication-failed"==n?me("Login failed"):"authentication-not-supported"==n?me("The server refused to authenticate using any supported methods."):"unknown-hostkey"==n||"unknown-host"==n?me("Untrusted host"):"invalid-hostkey"==n?me("Host key is incorrect"):"internal-error"==n?me("Internal error"):"timeout"==n?me("Connection has timed out."):"no-cockpit"==n?me("Cockpit is not installed on the system."):"no-forwarding"==n?me("Cannot forward login credentials"):"disconnected"==n?me("Server has closed the connection."):"not-supported"==n?me("Cockpit is not compatible with the software on the system."):"no-host"==n?me("Cockpit could not contact the given host."):"too-large"==n?me("Too much data"):n},n.http=function(e,n){return i(e)&&void 0===n&&(n=e,e=void 0),new be(e,n||{})},n.permission=function(e){return new ye(e)},n.metrics=function(e,n){return new ke(e,n)},n.oops=function(){window.parent!==window&&0===window.name.indexOf("cockpit1:")&&window.parent.postMessage('\n{ "command": "oops" }',v)};const _e=window.onerror;return window.onerror=function(e,t,o){return n.oops(),!!_e&&_e(e,t,o)},n}()}()})();